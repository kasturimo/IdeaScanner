{% extends "base.html" %}
{% block content %}
<div class="card p-4">
  <h3 class="text-center">Profile</h3>

  <p><strong>Email:</strong> {{ user.email if user.email else "Google Account" }}</p>
  <p><strong>Free analyses used:</strong> {{ user.free_analyses }}/2</p>

  {% if user.free_analyses >= 2 %}
  <hr>
  <h5>Upgrade to Premium</h5>
  <form action="{{ url_for('create_checkout_session') }}" method="POST">
    <div class="mb-3">
      <label for="country">Select your country:</label>
      <select name="country" class="form-control" required>
        <option value="US">United States</option>
        <option value="UK">United Kingdom</option>
        <option value="EU">European Union</option>
        <option value="CA">Canada</option>
        <option value="AU">Australia</option>
        <option value="NZ">New Zealand</option>
        <option value="IN">India</option>
        <option value="SG">Singapore</option>
        <option value="ID">Indonesia</option>
        <option value="PH">Philippines</option>
        <option value="MY">Malaysia</option>
        <option value="TH">Thailand</option>
        <option value="NG">Nigeria</option>
        <option value="ZA">South Africa</option>
        <option value="OTHER">Other</option>
      </select>
    </div>
    <button type="submit" class="btn btn-success w-100">Upgrade with Stripe</button>
  </form>
  {% endif %}

  <hr>
  <a href="{{ url_for('logout') }}" class="btn btn-secondary w-100">Logout</a>
</div>
{% endblock %}

